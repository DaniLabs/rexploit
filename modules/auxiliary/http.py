from urllib import urlencode
from urllib2 import Request, urlopen


class HTTP(object):
    def __init__(self):
        self.__headers = {"User-Agent": "Mozilla/5.0 (Windows NT 6.1; Win64; x64)", }
        self.__timeout = 5

    def GET(self, URL):
        request = Request(url = URL, headers = self.__headers)
        try:
            response = urlopen(request, timeout = self.__timeout).read()
        except Exception, e:
            response = e

        return str(response)

    # TODO Hay que comprobar que realmente funciona bien este POST request
    def POST(self, URL, values):
        data = urlencode(values)
        request = Request(url = URL, data = data, headers = self.__headers)
        try:
            response = urlopen(request, timeout=self.__timeout).read()
        except Exception, e:
            response = e

        return str(response)

    def setHeaders(self, headers):
        self.__headers = headers

    def setTimeout(self, timeout):
        self.__timeout = timeout
