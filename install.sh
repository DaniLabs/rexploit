#!/usr/bin/env bash
if [[ $EUID -ne 0 ]]; then
    echo "You must be root!" 1>&2
    exit 1
fi

echo "This script will install all packages that you need to develop on RExploit tool. Maybe this option will take some minutes."
read -p "Are you sure?(Y/N) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]
then
    echo "[!] Move to /tmp/"
    cd /tmp/
    echo "[!] Installing python-dev, python-all-dev, python3-all-dev, cx-freeze, qt5-default and nmap"

    apt-get install python-dev python-all-dev python3-all-dev cx-freeze qt5-default nmap 1>&2

    echo "[!] Downloading sip-4.17 and PyQT-5.5.1"
    wget 'http://downloads.sourceforge.net/project/pyqt/sip/sip-4.17/sip-4.17.tar.gz'
    wget 'https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.5.1/PyQt-gpl-5.5.1.tar.gz'

    echo "[!] Unpacking sip-4.17.tar.gz"
    tar -xvf sip-4.17.tar.gz
    rm sip-4.17.tar.gz
    cd sip-4.17

    echo "[!] Installing sip-4.17"

    python configure.py 1>&2
    make 1>&2
    make install 1>&2

    cd ..
    rm -r sip-4.17

    echo "[!] Unpacking PyQt-gpl-5.5.1.tar.gz"
    tar -xvf PyQt-gpl-5.5.1.tar.gz
    rm PyQt-gpl-5.5.1.tar.gz
    cd PyQt-gpl-5.5.1

    echo "[!] Installing PyQt-gpl-5.5.1"
    python configure.py 1>&2
    make 1>&2
    make install 1>&2

    cd ..
    rm -r PyQt-gpl-5.5.1

    echo "[!] Thanks for you interest"
fi
