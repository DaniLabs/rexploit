from views.main_view import MainView


class MainController(object):

    def __init__(self, routes):
        self.routes = routes
        self.main_view = MainView(self)
        self.project_controller = self.routes.get_route("Project")
        self.nmap_controller = self.routes.get_route("Nmap")
        self.welcome_controller = self.routes.get_route("Welcome")

    def start(self):
        self.main_view.show()
        self.main_view.load_central_widget(self.welcome_controller.get_widget())

    def action_home(self):
        self.main_view.load_central_widget(self.welcome_controller.get_widget())

    def action_new_project(self):
        if self.project_controller.new_project():
            project_file = self.project_controller.get_project_file()
            self.main_view.set_message_statusbar(self.project_controller.get_message_statusbar())
            self.nmap_controller.set_project_file(project_file)
            self.welcome_controller.set_project_file(project_file)

    def action_open_project(self):
        if self.project_controller.open_project():
            project_file = self.project_controller.get_project_file()
            self.main_view.set_message_statusbar(self.project_controller.get_message_statusbar())
            self.nmap_controller.set_project_file(project_file)
            self.welcome_controller.set_project_file(project_file)

    def action_save(self):
        #TODO action_save. Guardar los cambios realizados
        print "action_save"

    def action_vulnerabilities(self):
        print "action_vulnerabilities"

    def action_scan(self):
        self.main_view.load_central_widget(self.nmap_controller.get_widget())

    def action_settings(self):
        #TODO action_settings. Configurar opciones del proyecto. Que opciones.
        print "action_settings"

    def action_about(self):
        #TODO action_about. Mostrar informacion sobre el proyecto, version, autores, licencia, etc...
        print "action_about"
