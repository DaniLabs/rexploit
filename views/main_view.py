from PyQt4 import QtGui
from gen.ui_main import UiMainWindow


class MainView(QtGui.QMainWindow):

    def __init__(self, main_controller):
        super(MainView, self).__init__()
        self.main_controller = main_controller
        self.ui = None
        self.build_ui()

    def build_ui(self):
        self.ui = UiMainWindow()
        self.ui.setup_ui(self)
        self.ui.treeWidget.itemClicked.connect(lambda: self.printer(self.ui.treeWidget.currentItem()))
        self.ui.actionNew_project.triggered.connect(self.new_project)
        self.ui.actionOpen_project.triggered.connect(self.open_project)

    def printer(self, item):
        print item.text(0)

    def new_project(self):
        self.main_controller.new_project()

    def open_project(self):
        self.main_controller.open_project()

    def set_message_statusbar(self, message):
        self.ui.statusbar.showMessage(message)

    def load_central_widget(self, widget):
        self.ui.verticalLayout.addWidget(widget)
        self.ui.frame.setLayout(self.ui.verticalLayout)
